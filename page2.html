<!doctype html>

<head>
  <title>Curriculum — page 2</title>
  <link rel=stylesheet href="http://fonts.googleapis.com/css?family=Averia+Serif+Libre:300,400">
  <link rel=stylesheet href=style.css>
  <meta http-equiv=Content-Type content="text/html; charset=utf-8">
</head>

<h1>Curriculum: page 2, picture slide show</h1>

<p>We'll learn how JavaScript can make content dynamic and
interactive.</p>

<p>For this project, we will create a photo slide show. You'll have
more fun if your slide show is made from your own photos, or at least
photos you like. So step one is:</p>

<h2 class="step">Download images from Flickr</h2>

<h3 class=goal>Goal</h3>

<p>Get some nice photos to use in your slide show.</p>

<h3 class=inst>Instructions</h3>

<p>Create a directory for your entire project and call it
“slideshow”</p>

<p>Download three photos and save them in your <code>slideshow</code>
directory.
<br>The photos must:</p>

<ul>
  <li>Have file type of .jpg, .gif or .png</li>
  <li>Have a width of around 500 pixels.</li>
  <li>All have the same dimensions in pixels.</li>
  <li>All have the same orientation (all landscape, portrait, or
    square)</li>
  <li>Be photos you like. You will look at them all day!</li>
</ul>

<p>Note: you can download any three photos, and edit them to be all
the same size and shape. If you need help finding photos or editing
them, ask a coach for help.</p>

<h3 class=ex>Explanation</h3>

<p>We will start our slide show with just three photos. To make things
simpler, we want them to be not too big, and not odd sizes.</p>

<h2 class="step">Write HTML to display the photos</h2>

<h3 class=goal>Goal</h3>

<p>Understand how to display static content by writing HTML.</p>

<h3 class=inst>Instructions</h3>

<p>In a editor, open a new file.</p>

<p>Save the file with the name “index.html” in your
<code>slideshow</code> directory</p>

<p>Add your photos to the HTML but adding three lines like this:</p>

<pre>
&lt;img src="FILE_NAME_OF_THE_FIRST_PHOTO">
&lt;img src="FILE_NAME_OF_THE_SECOND_PHOTO">
&lt;img src="FILE_NAME_OF_THE_THIRD_PHOTO">
</pre>

<p>You must use the complete file name which includes the file
extension, which will be .jpg, .gif or .png.</p>

<p>In Chrome, go to <code>File</code> ▸ <code>Open File…</code>, find
your slideshow/index.html file and open it.</p>

<p>In your text editor, at the very top of the index.html file,
before the <code>&lt;img></code> tags, add:</p>

<pre>
&lt;!doctype html>
&lt;head>
  &lt;title>I ♥ Coding&lt;/title>
&lt;/head>
</pre>

<p>In Chrome, refresh the page, and take a look at the title of
the tab.</p>

<p>In your text editor, add another line to the head that sets the
character set to UTF-8:</p>

<pre>
&lt;!doctype html>
&lt;head>
  &lt;title>I ♥ Coding&lt;/title>
  <strong>&lt;meta charset='utf-8'></strong>
&lt;/head>
</pre>

<p>In Chrome, refresh the page, and take another look at the title of
the tab.</p>

<h3 class=ex>Explanation</h3>

<p>You've written some HTML and are looking at it in your browser!</p>

<p>You've also added a title, and defined the character set so that
UTF-8 characters are correctly displayed. (UTF-8 is important not just
for hearts, but also for umlauts.)</p>

<p>The first line, the <code>doctype</code> declaration, is  important
for a similar reason as setting the character set. This simple line
tells the browser what exact flavor of HTML we have written, so the
browser will treat it in a predictable way.</p>


<h2 class="step">Create a film roll of your photos</h2>

<h3 class=goal>Goal</h3>

<p>To see that CSS can be used to position content.</p>

<h3 class=inst>Instructions</h3>

<p>In your editor, create a new file and save it with the name
"style.css" in your <code>slideshow</code> directory.</p>

<p>In your <code>style.css</code>, add these CSS rules:</p>

<pre>
.picture-frame {
  height: 344px; /* height of one image */
  width: 500px;  /* width of one image */
  overflow: hidden;
  margin: 50px auto;
  position: relative;
}

.filmroll {
  width: 1500px; /* 3 times width of one image */
  position: absolute;
  left: 0px;
  top: 0px;
}

img {
  float: left;
}
</pre>

<p>Change the height and width values to match the height and width
in pixels of your photos. There are three values you must change.</p>

<p>Update your <code>index.html</code> file by adding a link to the
"style.css" stylesheet in the head, and by wrapping your
<code>&lt;img></code> tags in two <code>&lt;div></code> containers
with classes "picture-frame" and "film-roll":</p>

<pre>
&lt;!doctype html>
&lt;head>
  &lt;title>I ♥ Coding&lt;/title>
  &lt;meta charset='utf-8'>
  <strong>&lt;link rel="stylesheet" href="style.css" /></strong>
&lt;/head>

<strong>&lt;div class="picture-frame"></strong>
<strong>  &lt;div class="film-roll"></strong>
    &lt;img src="…" />
    &lt;img src="…" />
    &lt;img src="…" />
<strong>  &lt;/div></strong>
<strong>&lt;/div></strong>
</pre>

<p>In Chrome, refresh the page.</p>

<p>In Chrome, open the console.</p>

<aside>
  <p>Yesterday we saw how to access the console in Chrome: press
  Ctrl+Shift+I on Windows or Linux, press Command+Option+J on OS X.
  You can also go to the wrench menu in the upper right corner of your
  window, and select <code>Tools</code> ▸ <code>Developer
  Tools</code>.</p>
</aside>

<p>In the console, go the the left-most tab called "Elements". Click
on the arrows (▸) to look inside the
<code>&lt;body>…&lt;/body></code>. Keep exploring until you find your
<code>&lt;img></code> tags. It will look almost like this:</p>

<img src="inspecting-film-roll.png" class="figure">

<p>Look st the right column and see that you can see CSS rules that
are defined in your <code>style.css</code> file.</p>

<p>While selecting <code>&lt;div class="film-roll"></code>, access the
value of the "left" attribute in the right column, and change the
value from 0px to 50px. Then try -50px. Try using the up and down
arrows while changing the value of the left attribute.</p>

<p>Refresh the page to reset all the styles.</p>

<p>Play with more CSS values in other rules on other elements. Turn
styles them on and off using the checkboxes. What does each attribute
do?</p>

<h3 class=ex>Explanation</h3>

<p>Earlier, we saw that a CSS rule that looked like
<code>p { … }</code> targeted paragraphs. Rules that start with a dot,
like <code>.class-name { … }</code>, target elements with
<code>class-name</code> as their class attribute.</p>

<p>By using class names, we can control two <code>&lt;div></code> tags
in completely different ways, and we can use this control to now we
can see that CSS can also control position.</p>

<p>Using this technique. we have create a "picture frame" that is
centered in the page, and has a height and width that exactly matches
our photo size. (<code>overflow: hidden</code> is needed because
otherwise, the contents that go outside of the frame would still be
visible.)</p>

<!-- an illustration would help -->

<p>Inside of the picture frame, we created "film roll" that is a long
strip of all our photos. By changing the position of the film roll, we
can make our photos slide back and forth inside the picture frame.</p>

<p>We can adjust the CSS in the stylesheet, and we can adjust the CSS
by hand in the Developer Tools, but (so exciting!) we also adjust the
CSS using JavaScript. Ready to try?? Let's do it!</p>

<!-- an illustration would help -->

<h2 class="step">Create a reference to the film roll</h2>

<h3 class=goal>Goal</h3>

<p>To see that you can create a reference an HTML element, and explore
the element's properties in the console.</p>

<h3 class=inst>Instructions</h3>

<p>In your <code>index.html</code>, add the id "the-film-roll" to
<code>&lt;div></code> with class film-roll:</p>

<pre>
&lt;div class="film-roll" <strong>id="the-film-roll"</strong>>
</pre>

<p>Back in the Console tab of the Developer Tools, type:</p>

<pre>
var filmroll = document.getElementById('the-film-roll');
</pre>

<p>The type, one line at a time. Some lines may have an unexpected
effect (or unexpectedly no effect).</p>

<pre>
filmroll;
filmroll.offsetLeft;
filmroll.offsetLeft = -100;
filmroll.offsetLeft;
filmroll.style.left = '-100px';
filmroll.offsetLeft;
filmroll.style.top = '50px';
</pre>

<p>Try moving <code>filmroll</code> 700 pixels <em>toward</em> the
left.</p>

<p>Try setting other style properties to other values.</p>

<p>Refresh the page. Type the following in the console:</p>

<pre>
filmroll.style.left = '-100px';
</pre>

<p>What happened to our friend <code>filmroll</code>?</p>

<h3 class=ex>Explanation</h3>

<p>When JavaScript runs in the browser, the browser creates an
"environment variable" called "document", which has many useful
properties that we can use to access elements on the page. We can use
the <code>getElementById</code> method to get a reference to the
element with an ID of our choosing.</p>

<p>Here, we added an ID to the film roll element, and then used that
ID to create a reference that we could control with JavaScript.</p>

<p>Once we have a reference to the div with id "the-film-roll", we can
access its properties too! Some of them (like <code>offsetLeft</code>)
are <em>read only</em>, meaning we can't change the value. Some
(maybe you found some) can be changed. Other properties, like
<code>style</code> have properties themselves.</p>

<p>The <code>style</code> property allows us to control the CSS
attributes on an element. Therefore, but creating references to an
element (and HTML element) we can change its appearance and position
(by setting its CSS attributes).</p>

<p>The moment we refresh the page, we get a whole new environment and
and of the variable we created are gone. How can we create variables
with typing them in the console? There must be a way!</p>


<h2 class="step">Including a JavaScript file</h2>

<h3 class=goal>Goal</h3>

<p>To see how to set up a JavaScript environment.</p>

<h3 class=inst>Instructions</h3>

<p>In your editor, create a new file and save it with the name
"slideshow.js" in your <code>slideshow</code> directory.</p>

<p>In your <code>slideshow.js</code>, add the line that creates a
reference to film roll:</p>

<pre>
var filmroll = document.getElementById('the-film-roll');
</pre>

<p>In your <code>index.js</code>, include this new file at the very
<strong>end</strong>:</p>

<pre>
&lt;script src="slideshow.js">&lt;/script>
</pre>

<p>Back in the browser, refresh the page. Type the following in the
console:</p>

<pre>
filmroll.style.left = '-100px';
</pre>


<h3 class=ex>Explanation</h3>

<p>Whoa! Just like images and style sheets, you can load JavaScript
code when you load a web page. Instead of typing by hand on the
console, we can prepare a program, and send it along with the HTML,
CSS or images. Nice!</p>


<h2 class="step">Create a function to move the film roll</h2>

<h3 class=goal>Goal</h3>

<p>To use setInterval to create a simple animation.</p>

<h3 class=inst>Instructions</h3>

<p>Yesterday we saw that <code>setInterval</code> could be used to run
a function every n milliseconds. We can also stop the function using
<code>clearInterval</code>. Update your <code>slideshow.js</code>
file to contain this code, and then refresh the browser:</p>

<pre>
var filmroll = document.getElementById('the-film-roll');
var start = 0;
var end = 200;
var current = start;

function move() {
  filmroll.style.left = current + 'px';
  current = current + 1;
  if (current > end)
    clearInterval(loop); // This stops the loop
}

var loop = setInterval(move, 40);
</pre>

<p>Why can't we use a <code>for</code> or <code>while</code> for this
effect?</p>

<p>Try to speed up the scrolling effect. There are two ways. Which one
works better?</p>

<p>Update the <code>move</code> function to move the film roll 20
pixels every 50 milliseconds.<p>

<p>What if you want to move exactly 110 pixels? Update your function
so that it goes to exactly the end and not more.<p>

<p>Tip: <code>Math.min</code> is function that take any number of
arguments, and returns the one that is smallest. Try this:<p>

<pre>
current = Math.min(current + 20, end);
</pre>

<p>Make the photos scroll to the left instead of right.</p>

<p>How much do you have to move the film roll to make it scroll from
the first photo to the second photo?</p>

<p>What happens if your photo width is not a multiple of 20? How can
you fix the problem?<p>

<p>Update the <code>move</code> function so that the direction of
scrolling is only controlled by changing the start and end values.</p>

<h3 class=ex>Explanation</h3>

<p>To control how fast or slow a loop is performed, we can change the
time between loops, or we can change how big an effect each loop
has.</p>

<p>We used to use <code>setInterval</code> instead of a
<code>while</code> (of <code>for</code>) loop so we could add time
between the loops instead of doing many thousands and thousands of
loops.</p>

<p>In the end, your function might look something like this:</p>

<pre>
var move = function () {
  filmroll.style.left = current + 'px';

  if (current == end)
    clearInterval(loop);

  if (end > start) {
    current = Math.min(current + 20, end);
  } else {
    current = Math.max(current - 20, end);
  }
}
</pre>

<p>By using the <code>Math.min</code> and <code>Max.max</code>
functions, we can guarantee that the <code>current</code> value never
goes beyond the <code>end</code> (either bigger or smaller, depending
on direction)</p>


<h2 class="step">Create a scroll function</h2>

<h3 class=goal>Goal</h3>

<p>Create a re-usable scroll function that can be called multiple
times.</p>

<h3 class=inst>Instructions</h3>

<p>Create a function called "scroll" that accepts a start position,
and an end position.</p>

<pre>
function scroll(start, end) {
  // now what?
}
</pre>

<p>Move the <code>current</code> counter, your <code>move</code>
function and <code>setInterval</code> inside of <code>scroll</code>.
You no longer need to define start and end variables. Your
<code>slideshow.js</code> file will look like this:</p>

<pre>
var filmroll = document.getElementById('the-film-roll');

function scroll(start, end) {
  var current = start;

  var move = function () {
    filmroll.style.left = current + 'px';

    if (current == end)
      clearInterval(loop);

    if (end > start) {
      current = Math.min(current + 20, end);
    } else {
      current = Math.max(current - 20, end);
    }
  }

  var loop = setInterval(move, 50);
}
</pre>

<p>Refresh the browser.</p>

<p>Use the scroll function to slide to the second photo by typing in
the console type:</p>

<pre>
scroll(0, -500);
</pre>

<p>(… but replace 500 with the width of one of your photos.)</p>

<p>Use the scroll function to slide from the second photo to the
third.</p>

<p>Scroll back to the second photo.</p>

<h3 class=ex>Explanation</h3>

<p>Now we have a single function we can use to scroll left and right
from any starting position to and ending position. Yay!</p>


<h2 class="step">Add a keydown event listener</h2>

<h3 class=goal>Goal</h3>

<p>To see that we can give control of the slide show to the user.</p>

<h3 class=inst>Instructions</h3>

<p>In <code>slideshow.js.</code>, add an "EventLister" called
<code>handleEvent</code> to the <code>document</code> that triggers on
a <code>keydown</code> event, like this:</p>

<pre>
function handleEvent(e) {
  console.log(e, e.keyCode);
}

document.addEventListener('keydown', handleEvent);
</pre>

<p>In Chrome, be sure you have the Console tab open in the Developer
Tools.</p>

<p>Refresh the page.</p>

<p>Beginning pressing any of the keys, and while you do, watch the
output that is logged in the console.</p>

<p>What are the <code>keyCode</code>s for the left and right arrow
keys?</p>

<p>Update the <code>handleEvent</code> function to call a function
that scrolls left or right when the left or right arrow is
pressed:</p>

<pre>
function handleEvent(e) {
  backAndForth(e.keyCode);
}

function backAndForth(keyCode) {
  if (keyCode == 37)
    scroll(500, 0);

  if (keyCode == 39)
    scroll(0, 500);
}
</pre>

<p>(… but replace 500 with the width of one of your photos.)</p>

<p>Try out this new functionality in Chrome. Remember to always
refresh the page when you change your JavaScript code.</p>

<p>Why doesn't it keep scrolling in the same direction when the press
the same arrow?</p>

<p>Store the current scrolling position in a variable, and after
calling the <code>scroll</code> function, update the value of the
current position. Always use the current position as the "start"
position when you call the <code>scroll</code> function.</p>

<p>Try it first! but if you need help, take a peek below:</p>

<pre>
var current = 0;

function backAndForth(keyCode) {
  if (keyCode == 37) {
    scroll(current, current - 500);
    current = current - 500;
  }

  if (keyCode == 39) {
    scroll(current, current + 500);
    current = current + 500;
  }
}
</pre>

<p>The operator <code>+=</code> first adds the value on its right to
the value of the variable on its left, updates the variable to the
sum, and returns the sum. (It's just shorthand for
<code>a = a + b</code>.) The <code>-=</code> operator works the same
for subtraction. Use these operators to reduce the lines in your
<code>handleEvent</code>function. Does this notation makes sense to
you? Do you like it? Why or why not?</p>

<h3 class=ex>Explanation</h3>

<p>When JavaScript runs in your browser (which is all the time, unless
you shut off JavaScript), it is always "listening" to "events", like
whether you type something, or move your mouse. These events have
names like "keydown", "keyup", and "click", and are emitted by all
kinds of elements in the <code>document</code>, and by the
<code>document</code> itself. In this example, we are only listening
to <code>keydown</code> events emitted by the
<code>document</code>.</p>

<p>By listening to the events emitted, we can know when the person
viewing the page has <em>interacted</em> with the page. We can look at
what the person did (what they typed, or what they clicked on) and
then we can do something. In this example, we moved the film roll to
the left when the person pressed "Left" and we moved it right when the
person pressed "right".</p>

<p>By listening to <em>input</em> from the person looking at the page,
we can allow the person to control the page.</p>

<p>Pretty cool! And very powerful.</p>


<h2 class="step">Correct buggy behaviour</h2>

<h3 class=goal>Goal</h3>

<p>To see how to prevent events from having an effect when it is not
desirable.</p>

<h3 class=inst>Instructions</h3>

<p>Our functions for listening to events and scrolling have bug in
them. Maybe you already noticed it. To recreate the bug, try pressing
the left and right arrows faster than the film roll can slide. (So,
start the film roll sliding, and then press either left or right again
before it is finished sliding). You'll see an ugly flickering effect.

<p>Do you know what is causing it? What can we do to stop it?</p>

<p>Try to fix this bug.</p>

<h3 class=ex>Explanation</h3>

<p>Lots of times when we write code, we forget that our users might do
things that don't "make sense" at first, or will try to do things we
didn't think of. Oops. We think our job is done, but then we find out
our code has a bug and we have to correct it (or tell the users "Don't
do that!" which is sort of rude).</p>

<p>First we have to figure out that the bug exists. Then we have to
figure out why the bug is happening. Then we have to figure out how to
fix it. Lots of programmers think fixing bugs is fun :), since they
are new puzzles to solve.</p>

<p>Did you find a solution? This is one way to fix the bug:</p>

<pre>
<strong>var scrolling = false;</strong>

function scroll(start, end) {
  var current = start;

  var move = function () {
    filmroll.style.left = current + 'px';
<strong>
    if (current == end) {
      clearInterval(loop);
      scrolling = false;
    }
</strong>
    if (end > start) {
      current = Math.min(current + 20, end);
    } else {
      current = Math.max(current - 20, end);
    }
  }

  var loop = setInterval(move, 50);
  <strong>scrolling = true;</strong>
}

function handleEvent(e) {
  <strong>if (!scrolling) {
    backAndForth(e.keyCode);
  }</strong>
}
</pre>

<p>We created a variable that remembers whether or not we are already
scrolling, and if we are, we ignore the keydown event from the
user. Maybe this is not what the user expects. What is reasonable for
the user to expect? How can we change the code to do what the user
expects?</p>


<h2>Next!</h2>

<p>Now that we've changed CSS, let's change the HTML too!</p>


<p><a href="page3.html">→ To the third page</a>.</p>
